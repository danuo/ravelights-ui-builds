import{m as Ve,r as w,G as Y,w as T,d as p,g as $,b8 as We,i as Le,bb as ze,o as W,ah as De,af as Oe,W as Ee,ag as ke,ad as _e,a0 as Be,a6 as Ie,a5 as je,f as x,b7 as H,bc as Ke,_ as ce,bd as Qe,j as O,T as Te,X as Ae,az as de,ar as Ue,aw as Ne,ak as ne,be as fe,ax as Re,q as Xe,c as Ze,bf as Ye,al as Ge,bg as Je,bh as et,at as tt,au as ot,bi as lt,bj as nt,bk as it,bl as at,bm as ve,bn as ut,aA as rt,bo as st,am as ct,bp as dt,bq as ft}from"./index-CCL2DMgm.js";import{c as ie,d as vt}from"./selection-CFbQgs5m.js";const me=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,he=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,ge=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,U=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,N=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,oe={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>me.test(e),hexaColor:e=>he.test(e),hexOrHexaColor:e=>ge.test(e),rgbColor:e=>U.test(e),rgbaColor:e=>N.test(e),rgbOrRgbaColor:e=>U.test(e)||N.test(e),hexOrRgbColor:e=>me.test(e)||U.test(e),hexaOrRgbaColor:e=>he.test(e)||N.test(e),anyColor:e=>ge.test(e)||U.test(e)||N.test(e)};function mt(e){return e??null}function pe(e,t){return e??(t===!0?`f_${ie()}`:null)}function ht({getValue:e,required:t=!0}={}){if(Ve.value===!0){const o=e!==void 0?w(mt(e())):w(null);return t===!0&&o.value===null&&Y(()=>{o.value=`f_${ie()}`}),e!==void 0&&T(e,l=>{o.value=pe(l,t)}),o}return e!==void 0?p(()=>pe(e(),t)):w(`f_${ie()}`)}const be=/^on[A-Z]/;function gt(){const{attrs:e,vnode:t}=$(),o={listeners:w({}),attributes:w({})};function l(){const i={},r={};for(const n in e)n!=="class"&&n!=="style"&&be.test(n)===!1&&(i[n]=e[n]);for(const n in t.props)be.test(n)===!0&&(r[n]=t.props[n]);o.attributes.value=i,o.listeners.value=r}return We(l),l(),o}function pt({validate:e,resetValidation:t,requiresQForm:o}){const l=Le(ze,!1);if(l!==!1){const{props:i,proxy:r}=$();Object.assign(r,{validate:e,resetValidation:t}),T(()=>i.disable,n=>{n===!0?(typeof t=="function"&&t(),l.unbindComponent(r)):l.bindComponent(r)}),Y(()=>{i.disable!==!0&&l.bindComponent(r)}),W(()=>{i.disable!==!0&&l.unbindComponent(r)})}else o===!0&&console.error("Parent QForm not found on useFormChild()!")}const bt=[!0,!1,"ondemand"],xt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>bt.includes(e)}};function yt(e,t){const{props:o,proxy:l}=$(),i=w(!1),r=w(null),n=w(!1);pt({validate:A,resetValidation:c});let s=0,m;const f=p(()=>o.rules!==void 0&&o.rules!==null&&o.rules.length!==0),d=p(()=>o.disable!==!0&&f.value===!0&&t.value===!1),q=p(()=>o.error===!0||i.value===!0),E=p(()=>typeof o.errorMessage=="string"&&o.errorMessage.length!==0?o.errorMessage:r.value);T(()=>o.modelValue,()=>{n.value=!0,d.value===!0&&o.lazyRules===!1&&_()});function u(){o.lazyRules!=="ondemand"&&d.value===!0&&n.value===!0&&_()}T(()=>o.reactiveRules,B=>{B===!0?m===void 0&&(m=T(()=>o.rules,u,{immediate:!0,deep:!0})):m!==void 0&&(m(),m=void 0)},{immediate:!0}),T(()=>o.lazyRules,u),T(e,B=>{B===!0?n.value=!0:d.value===!0&&o.lazyRules!=="ondemand"&&_()});function c(){s++,t.value=!1,n.value=!1,i.value=!1,r.value=null,_.cancel()}function A(B=o.modelValue){if(o.disable===!0||f.value===!1)return!0;const F=++s,S=t.value!==!0?()=>{n.value=!0}:()=>{},k=(y,g)=>{y===!0&&S(),i.value=y,r.value=g||null,t.value=!1},b=[];for(let y=0;y<o.rules.length;y++){const g=o.rules[y];let C;if(typeof g=="function"?C=g(B,oe):typeof g=="string"&&oe[g]!==void 0&&(C=oe[g](B)),C===!1||typeof C=="string")return k(!0,C),!1;C!==!0&&C!==void 0&&b.push(C)}return b.length===0?(k(!1),!0):(t.value=!0,Promise.all(b).then(y=>{if(y===void 0||Array.isArray(y)===!1||y.length===0)return F===s&&k(!1),!0;const g=y.find(C=>C===!1||typeof C=="string");return F===s&&k(g!==void 0,g),g===void 0},y=>(F===s&&(console.error(y),k(!0)),!1)))}const _=De(A,0);return W(()=>{m?.(),_.cancel()}),Object.assign(l,{resetValidation:c,validate:A}),Oe(l,"hasError",()=>q.value),{isDirtyModel:n,hasRules:f,hasError:q,errorMessage:E,validate:A,resetValidation:c}}function Ct(e){return e!=null&&(""+e).length!==0}const qt={...Ee,...xt,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},Wt={...qt,maxlength:[Number,String]},Lt=["update:modelValue","clear","focus","blur"];function zt({requiredForAttr:e=!0,tagProp:t,changeEvent:o=!1}={}){const{props:l,proxy:i}=$(),r=Ae(l,i.$q),n=ht({required:e,getValue:()=>l.for});return{requiredForAttr:e,changeEvent:o,tag:t===!0?p(()=>l.tag):{value:"label"},isDark:r,editable:p(()=>l.disable!==!0&&l.readonly!==!0),innerLoading:w(!1),focused:w(!1),hasPopupOpen:!1,splitAttrs:gt(),targetUid:n,rootRef:w(null),targetRef:w(null),controlRef:w(null)}}function Dt(e){const{props:t,emit:o,slots:l,attrs:i,proxy:r}=$(),{$q:n}=r;let s=null;e.hasValue===void 0&&(e.hasValue=p(()=>Ct(t.modelValue))),e.emitValue===void 0&&(e.emitValue=a=>{o("update:modelValue",a)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:R,onFocusout:L}),Object.assign(e,{clearValue:P,onControlFocusin:R,onControlFocusout:L,focus:g}),e.computedCounter===void 0&&(e.computedCounter=p(()=>{if(t.counter!==!1){const a=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,h=t.maxlength!==void 0?t.maxlength:t.maxValues;return a+(h!==void 0?" / "+h:"")}}));const{isDirtyModel:m,hasRules:f,hasError:d,errorMessage:q,resetValidation:E}=yt(e.focused,e.innerLoading),u=e.floatingLabel!==void 0?p(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):p(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),c=p(()=>t.bottomSlots===!0||t.hint!==void 0||f.value===!0||t.counter===!0||t.error!==null),A=p(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),_=p(()=>`q-field row no-wrap items-start q-field--${A.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(u.value===!0?" q-field--float":"")+(F.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(d.value===!0?" q-field--error":"")+(d.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&c.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),B=p(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(d.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),F=p(()=>t.labelSlot===!0||t.label!==void 0),S=p(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&d.value!==!0?` text-${t.labelColor}`:"")),k=p(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:u.value,modelValue:t.modelValue,emitValue:e.emitValue})),b=p(()=>{const a={};return e.targetUid.value&&(a.for=e.targetUid.value),t.disable===!0&&(a["aria-disabled"]="true"),a});function y(){const a=document.activeElement;let h=e.targetRef?.value;h&&(a===null||a.id!==e.targetUid.value)&&(h.hasAttribute("tabindex")===!0||(h=h.querySelector("[tabindex]")),h!==a&&h?.focus({preventScroll:!0}))}function g(){ke(y)}function C(){Ke(y);const a=document.activeElement;a!==null&&e.rootRef.value.contains(a)&&a.blur()}function R(a){s!==null&&(clearTimeout(s),s=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,o("focus",a))}function L(a,h){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,o("blur",a)),h?.())})}function P(a){_e(a),n.platform.is.mobile!==!0?(e.targetRef?.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),o("update:modelValue",null),e.changeEvent===!0&&o("change",null),o("clear",t.modelValue),Be(()=>{const h=m.value;E(),m.value=h})}function G(a){[13,32].includes(a.keyCode)&&P(a)}function z(){const a=[];return l.prepend!==void 0&&a.push(x("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:H},l.prepend())),a.push(x("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},I())),d.value===!0&&t.noErrorIcon===!1&&a.push(V("error",[x(ce,{name:n.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?a.push(V("inner-loading-append",l.loading!==void 0?l.loading():[x(Qe,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&a.push(V("inner-clearable-append",[x(ce,{class:"q-field__focusable-action",name:t.clearIcon||n.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":n.lang.label.clear,onKeyup:G,onClick:P})])),l.append!==void 0&&a.push(x("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:H},l.append())),e.getInnerAppend!==void 0&&a.push(V("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&a.push(e.getControlChild()),a}function I(){const a=[];return t.prefix!==void 0&&t.prefix!==null&&a.push(x("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&a.push(e.getShadowControl()),F.value===!0&&a.push(x("div",{class:S.value},O(l.label,t.label))),e.getControl!==void 0?a.push(e.getControl()):l.rawControl!==void 0?a.push(l.rawControl()):l.control!==void 0&&a.push(x("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},l.control(k.value))),t.suffix!==void 0&&t.suffix!==null&&a.push(x("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),a.concat(O(l.default))}function J(){let a,h;d.value===!0?q.value!==null?(a=[x("div",{role:"alert"},q.value)],h=`q--slot-error-${q.value}`):(a=O(l.error),h="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(a=[x("div",t.hint)],h=`q--slot-hint-${t.hint}`):(a=O(l.hint),h="q--slot-hint"));const K=t.counter===!0||l.counter!==void 0;if(t.hideBottomSpace===!0&&K===!1&&a===void 0)return;const Q=x("div",{key:h,class:"q-field__messages col"},a);return x("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:H},[t.hideBottomSpace===!0?Q:x(Te,{name:"q-transition--field-message"},()=>Q),K===!0?x("div",{class:"q-field__counter"},l.counter!==void 0?l.counter():e.computedCounter.value):null])}function V(a,h){return h===null?null:x("div",{key:a,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},h)}let j=!1;return Ie(()=>{j=!0}),je(()=>{j===!0&&t.autofocus===!0&&r.focus()}),t.autofocus===!0&&Y(()=>{r.focus()}),W(()=>{s!==null&&clearTimeout(s)}),Object.assign(r,{focus:g,blur:C}),function(){const h=e.getControl===void 0&&l.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...b.value}:b.value;return x(e.tag.value,{ref:e.rootRef,class:[_.value,i.class],style:i.style,...h},[l.before!==void 0?x("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:H},l.before()):null,x("div",{class:"q-field__inner relative-position col self-stretch"},[x("div",{ref:e.controlRef,class:B.value,tabindex:-1,...e.controlEvents},z()),c.value===!0?J():null]),l.after!==void 0?x("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:H},l.after()):null])}}const St={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},wt={...St,contextMenu:Boolean};function Et({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:l,proxy:i,emit:r}=$(),n=w(null);let s=null;function m(u){return n.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const f={};o===void 0&&(Object.assign(f,{hide(u){i.hide(u)},toggle(u){i.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Ue(u,13)===!0&&f.toggle(u)},contextClick(u){i.hide(u),H(u),Be(()=>{i.show(u),u.qAnchorHandled=!0})},prevent:H,mobileTouch(u){if(f.mobileCleanup(u),m(u)!==!0)return;i.hide(u),n.value.classList.add("non-selectable");const c=u.target;de(f,"anchor",[[c,"touchmove","mobileCleanup","passive"],[c,"touchend","mobileCleanup","passive"],[c,"touchcancel","mobileCleanup","passive"],[n.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,i.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){n.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&u!==void 0&&vt()}}),o=function(u=l.contextMenu){if(l.noParentEvent===!0||n.value===null)return;let c;u===!0?i.$q.platform.is.mobile===!0?c=[[n.value,"touchstart","mobileTouch","passive"]]:c=[[n.value,"mousedown","hide","passive"],[n.value,"contextmenu","contextClick","notPassive"]]:c=[[n.value,"click","toggle","passive"],[n.value,"keyup","toggleKey","passive"]],de(f,"anchor",c)});function d(){Ne(f,"anchor")}function q(u){for(n.value=u;n.value.classList.contains("q-anchor--skip");)n.value=n.value.parentNode;o()}function E(){if(l.target===!1||l.target===""||i.$el.parentNode===null)n.value=null;else if(l.target===!0)q(i.$el.parentNode);else{let u=l.target;if(typeof l.target=="string")try{u=document.querySelector(l.target)}catch{u=void 0}u!=null?(n.value=u.$el||u,o()):(n.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return T(()=>l.contextMenu,u=>{n.value!==null&&(d(),o(u))}),T(()=>l.target,()=>{n.value!==null&&d(),E()}),T(()=>l.noParentEvent,u=>{n.value!==null&&(u===!0?d():o())}),Y(()=>{E(),t!==!0&&l.modelValue===!0&&n.value===null&&r("update:modelValue",!1)}),W(()=>{s!==null&&clearTimeout(s),d()}),{anchorEl:n,canShow:m,anchorEvents:f}}function kt(e,t){const o=w(null);let l;function i(s,m){const f=`${m!==void 0?"add":"remove"}EventListener`,d=m!==void 0?m:l;s!==window&&s[f]("scroll",d,ne.passive),window[f]("scroll",d,ne.passive),l=m}function r(){o.value!==null&&(i(o.value),o.value=null)}const n=T(()=>e.noParentEvent,()=>{o.value!==null&&(r(),t())});return W(n),{localScrollTarget:o,unconfigureScrollTarget:r,changeScrollEvent:i}}const{notPassiveCapture:X}=ne,M=[];function Z(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=fe.length-1;for(;o>=0;){const l=fe[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=M.length-1;l>=0;l--){const i=M[l];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function _t(e){M.push(e),M.length===1&&(document.addEventListener("mousedown",Z,X),document.addEventListener("touchstart",Z,X))}function xe(e){const t=M.findIndex(o=>o===e);t!==-1&&(M.splice(t,1),M.length===0&&(document.removeEventListener("mousedown",Z,X),document.removeEventListener("touchstart",Z,X)))}let ye,Ce;function qe(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Bt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ae={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ae[`${e}#ltr`]=e,ae[`${e}#rtl`]=e});function Se(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:ae[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function Tt(e,t){let{top:o,left:l,right:i,bottom:r,width:n,height:s}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],l-=t[0],r+=t[1],i+=t[0],n+=t[0],s+=t[1]),{top:o,bottom:r,height:s,left:l,right:i,width:n,middle:l+(i-l)/2,center:o+(r-o)/2}}function At(e,t,o){let{top:l,left:i}=e.getBoundingClientRect();return l+=t.top,i+=t.left,o!==void 0&&(l+=o[1],i+=o[0]),{top:l,bottom:l+1,height:1,left:i,right:i+1,width:1,middle:i,center:l}}function Rt(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function we(e,t,o,l){return{top:e[o.vertical]-t[l.vertical],left:e[o.horizontal]-t[l.horizontal]}}function Fe(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Fe(e,t+1)},10);return}const{targetEl:o,offset:l,anchorEl:i,anchorOrigin:r,selfOrigin:n,absoluteOffset:s,fit:m,cover:f,maxHeight:d,maxWidth:q}=e;if(Re.is.ios===!0&&window.visualViewport!==void 0){const y=document.body.style,{offsetLeft:g,offsetTop:C}=window.visualViewport;g!==ye&&(y.setProperty("--q-pe-left",g+"px"),ye=g),C!==Ce&&(y.setProperty("--q-pe-top",C+"px"),Ce=C)}const{scrollLeft:E,scrollTop:u}=o,c=s===void 0?Tt(i,f===!0?[0,0]:l):At(i,s,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:q,maxHeight:d,visibility:"visible"});const{offsetWidth:A,offsetHeight:_}=o,{elWidth:B,elHeight:F}=m===!0||f===!0?{elWidth:Math.max(c.width,A),elHeight:f===!0?Math.max(c.height,_):_}:{elWidth:A,elHeight:_};let S={maxWidth:q,maxHeight:d};(m===!0||f===!0)&&(S.minWidth=c.width+"px",f===!0&&(S.minHeight=c.height+"px")),Object.assign(o.style,S);const k=Rt(B,F);let b=we(c,k,r,n);if(s===void 0||l===void 0)le(b,c,k,r,n);else{const{top:y,left:g}=b;le(b,c,k,r,n);let C=!1;if(b.top!==y){C=!0;const R=2*l[1];c.center=c.top-=R,c.bottom-=R+2}if(b.left!==g){C=!0;const R=2*l[0];c.middle=c.left-=R,c.right-=R+2}C===!0&&(b=we(c,k,r,n),le(b,c,k,r,n))}S={top:b.top+"px",left:b.left+"px"},b.maxHeight!==void 0&&(S.maxHeight=b.maxHeight+"px",c.height>b.maxHeight&&(S.minHeight=S.maxHeight)),b.maxWidth!==void 0&&(S.maxWidth=b.maxWidth+"px",c.width>b.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(o.style,S),o.scrollTop!==u&&(o.scrollTop=u),o.scrollLeft!==E&&(o.scrollLeft=E)}function le(e,t,o,l,i){const r=o.bottom,n=o.right,s=Xe(),m=window.innerHeight-s,f=document.body.clientWidth;if(e.top<0||e.top+r>m)if(i.vertical==="center")e.top=t[l.vertical]>m/2?Math.max(0,m-r):0,e.maxHeight=Math.min(r,m);else if(t[l.vertical]>m/2){const d=Math.min(m,l.vertical==="center"?t.center:l.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,d),e.top=Math.max(0,d-r)}else e.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,m-e.top);if(e.left<0||e.left+n>f)if(e.maxWidth=Math.min(n,f),i.horizontal==="middle")e.left=t[l.horizontal]>f/2?Math.max(0,f-n):0;else if(t[l.horizontal]>f/2){const d=Math.min(f,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(n,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(n,f-e.left)}const Ot=Ze({name:"QMenu",inheritAttrs:!1,props:{...wt,...et,...Ee,...Je,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:qe},self:{type:String,validator:qe},offset:{type:Array,validator:Bt},scrollTarget:Ge,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ye,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){let i=null,r,n,s;const m=$(),{proxy:f}=m,{$q:d}=f,q=w(null),E=w(!1),u=p(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),c=Ae(e,d),{registerTick:A,removeTick:_}=tt(),{registerTimeout:B}=ot(),{transitionProps:F,transitionStyle:S}=lt(e),{localScrollTarget:k,changeScrollEvent:b,unconfigureScrollTarget:y}=kt(e,re),{anchorEl:g,canShow:C}=Et({showing:E}),{hide:R}=nt({showing:E,canShow:C,handleShow:K,handleHide:Q,hideOnRouteChange:u,processOnMount:!0}),{showPortal:L,hidePortal:P,renderPortal:G}=it(m,q,Me,"menu"),z={anchorEl:g,innerRef:q,onClickOutside(v){if(e.persistent!==!0&&E.value===!0)return R(v),(v.type==="touchstart"||v.target.classList.contains("q-dialog__backdrop"))&&_e(v),!0}},I=p(()=>Se(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),J=p(()=>e.cover===!0?I.value:Se(e.self||"top start",d.lang.rtl)),V=p(()=>(e.square===!0?" q-menu--square":"")+(c.value===!0?" q-menu--dark q-dark":"")),j=p(()=>e.autoClose===!0?{onClick:He}:{}),a=p(()=>E.value===!0&&e.persistent!==!0);T(a,v=>{v===!0?(at(ee),_t(z)):(ve(ee),xe(z))});function h(){ke(()=>{let v=q.value;v&&v.contains(document.activeElement)!==!0&&(v=v.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||v.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||v.querySelector("[autofocus], [data-autofocus]")||v,v.focus({preventScroll:!0}))})}function K(v){if(i=e.noRefocus===!1?document.activeElement:null,ut(se),L(),re(),r=void 0,v!==void 0&&(e.touchPosition||e.contextMenu)){const te=rt(v);if(te.left!==void 0){const{top:$e,left:Pe}=g.value.getBoundingClientRect();r={left:te.left-Pe,top:te.top-$e}}}n===void 0&&(n=T(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,D)),e.noFocus!==!0&&document.activeElement.blur(),A(()=>{D(),e.noFocus!==!0&&h()}),B(()=>{d.platform.is.ios===!0&&(s=e.autoClose,q.value.click()),D(),L(!0),o("show",v)},e.transitionDuration)}function Q(v){_(),P(),ue(!0),i!==null&&(v===void 0||v.qClickOutside!==!0)&&(((v?.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),B(()=>{P(!0),o("hide",v)},e.transitionDuration)}function ue(v){r=void 0,n!==void 0&&(n(),n=void 0),(v===!0||E.value===!0)&&(st(se),y(),xe(z),ve(ee)),v!==!0&&(i=null)}function re(){(g.value!==null||e.scrollTarget!==void 0)&&(k.value=ct(g.value,e.scrollTarget),b(k.value,D))}function He(v){s!==!0?(dt(f,v),o("click",v)):s=!1}function se(v){a.value===!0&&e.noFocus!==!0&&ft(q.value,v.target)!==!0&&h()}function ee(v){e.noEscDismiss!==!0&&(o("escapeKey"),R(v))}function D(){Fe({targetEl:q.value,offset:e.offset,anchorEl:g.value,anchorOrigin:I.value,selfOrigin:J.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Me(){return x(Te,F.value,()=>E.value===!0?x("div",{role:"menu",...l,ref:q,tabindex:-1,class:["q-menu q-position-engine scroll"+V.value,l.class],style:[l.style,S.value],...j.value},O(t.default)):null)}return W(ue),Object.assign(f,{focus:h,updatePosition:D}),G}}),Ft=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Ht=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Mt=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,$t=/[a-z0-9_ -]$/i;function It(e){return function(o){if(o.type==="compositionend"||o.type==="change"){if(o.target.qComposing!==!0)return;o.target.qComposing=!1,e(o)}else o.type==="compositionupdate"&&o.target.qComposing!==!0&&typeof o.data=="string"&&(Re.is.firefox===!0?$t.test(o.data)===!1:Ft.test(o.data)===!0||Ht.test(o.data)===!0||Mt.test(o.data)===!0)===!0&&(o.target.qComposing=!0)}}export{Ot as Q,Wt as a,zt as b,It as c,Dt as d,Ct as f,oe as t,Lt as u};
