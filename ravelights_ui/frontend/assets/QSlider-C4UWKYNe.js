import{d as w}from"./selection-CNOwUFHd.js";import{u as S,a as T,c as $,k as A,b as g}from"./use-slider-D-q3iSdU.js";import{c as B,g as P,r as s,w as E,d as o,ab as F,f as I}from"./index-BPYwMKt6.js";let p=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const u=document.createElement("div");Object.assign(u.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(u),e.scrollLeft=-1e3,p=e.scrollLeft>=0,e.remove()}const q=()=>({}),j=B({name:"QSlider",props:{...T,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:S,setup(e,{emit:u}){const{proxy:{$q:b}}=P(),{state:t,methods:a}=$({updateValue:f,updatePosition:x,getDragging:y,formAttrs:w(e)}),c=s(null),d=s(0),n=s(0);function v(){n.value=e.modelValue===null?t.innerMin.value:g(e.modelValue,t.innerMin.value,t.innerMax.value)}E(()=>`${e.modelValue}|${t.innerMin.value}|${t.innerMax.value}`,v),v();const C=o(()=>a.convertModelToRatio(n.value)),m=o(()=>t.active.value===!0?d.value:C.value),h=o(()=>{const l={[t.positionProp.value]:`${100*t.innerMinRatio.value}%`,[t.sizeProp.value]:`${100*(m.value-t.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(l.backgroundImage=`url(${e.selectionImg}) !important`),l}),M=a.getThumbRenderFn({focusValue:!0,getNodeData:q,ratio:m,label:o(()=>e.labelValue!==void 0?e.labelValue:n.value),thumbColor:o(()=>e.thumbColor||e.color),labelColor:o(()=>e.labelColor),labelTextColor:o(()=>e.labelTextColor)}),V=o(()=>t.editable.value!==!0?{}:b.platform.is.mobile===!0?{onClick:a.onMobileClick}:{onMousedown:a.onActivate,onFocus:R,onBlur:a.onBlur,onKeydown:k,onKeyup:a.onKeyup});function f(l){n.value!==e.modelValue&&u("update:modelValue",n.value),l===!0&&u("change",n.value)}function y(){return c.value.getBoundingClientRect()}function x(l,r=t.dragging.value){const i=a.getDraggingRatio(l,r);n.value=a.convertRatioToModel(i),d.value=e.snap!==!0||e.step===0?i:a.convertModelToRatio(n.value)}function R(){t.focus.value=!0}function k(l){if(A.includes(l.keyCode)===!1)return;F(l);const r=([34,33].includes(l.keyCode)?10:1)*t.keyStep.value,i=([34,37,40].includes(l.keyCode)?-1:1)*(t.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*r;n.value=g(t.roundValueFn.value(n.value+i),t.innerMin.value,t.innerMax.value),f()}return()=>{const l=a.getContent(h,t.tabindex,V,r=>{r.push(M())});return I("div",{ref:c,class:t.classes.value+(e.modelValue===null?" q-slider--no-value":""),...t.attributes.value,"aria-valuenow":e.modelValue},l)}}});export{j as Q,p as r};
