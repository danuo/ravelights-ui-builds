import{ax as Pe,ay as Y,az as M,aA as j,ap as Re,aB as T,aC as D,aR as oe,a0 as K,aD as Xe,ab as Oe,Z as Ye,g as je,_ as Ke,r as z,d as a,ba as He,ac as H,o as Ue,f as C,a1 as We}from"./index-BPYwMKt6.js";import{g as ie,s as ue,c as Ze,u as Ge,a as Je}from"./selection-CNOwUFHd.js";function U(l,s,o){const m=D(l);let e,r=m.left-s.event.x,i=m.top-s.event.y,d=Math.abs(r),f=Math.abs(i);const u=s.direction;u.horizontal===!0&&u.vertical!==!0?e=r<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?e=i<0?"up":"down":u.up===!0&&i<0?(e="up",d>f&&(u.left===!0&&r<0?e="left":u.right===!0&&r>0&&(e="right"))):u.down===!0&&i>0?(e="down",d>f&&(u.left===!0&&r<0?e="left":u.right===!0&&r>0&&(e="right"))):u.left===!0&&r<0?(e="left",d<f&&(u.up===!0&&i<0?e="up":u.down===!0&&i>0&&(e="down"))):u.right===!0&&r>0&&(e="right",d<f&&(u.up===!0&&i<0?e="up":u.down===!0&&i>0&&(e="down")));let y=!1;if(e===void 0&&o===!1){if(s.event.isFirst===!0||s.event.lastDir===void 0)return{};e=s.event.lastDir,y=!0,e==="left"||e==="right"?(m.left-=r,d=0,r=0):(m.top-=i,f=0,i=0)}return{synthetic:y,payload:{evt:l,touch:s.event.mouse!==!0,mouse:s.event.mouse===!0,position:m,direction:e,isFirst:s.event.isFirst,isFinal:o===!0,duration:Date.now()-s.event.time,distance:{x:d,y:f},offset:{x:r,y:i},delta:{x:m.left-s.event.lastX,y:m.top-s.event.lastY}}}}let Qe=0;const Ve=Pe({name:"touch-pan",beforeMount(l,{value:s,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function m(r,i){o.mouse===!0&&i===!0?Oe(r):(o.stop===!0&&K(r),o.prevent===!0&&oe(r))}const e={uid:"qvtp_"+Qe++,handler:s,modifiers:o,direction:ie(o),noop:Re,mouseStart(r){ue(r,e)&&Xe(r)&&(T(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(r,!0))},touchStart(r){if(ue(r,e)){const i=r.target;T(e,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),e.start(r)}},start(r,i){if(M.is.firefox===!0&&j(l,!0),e.lastEvt=r,i===!0||o.stop===!0){if(e.direction.all!==!0&&(i!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const u=r.type.indexOf("mouse")!==-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&oe(u),r.cancelBubble===!0&&K(u),Object.assign(u,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[e.uid]:r.qClonedBy.concat(e.uid)}),e.initialEvent={target:r.target,event:u}}K(r)}const{left:d,top:f}=D(r);e.event={x:d,y:f,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:d,lastY:f}},move(r){if(e.event===void 0)return;const i=D(r),d=i.left-e.event.x,f=i.top-e.event.y;if(d===0&&f===0)return;e.lastEvt=r;const u=e.event.mouse===!0,y=()=>{m(r,u);let k;o.preserveCursor!==!0&&o.preservecursor!==!0&&(k=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ze(),e.styleCleanup=h=>{if(e.styleCleanup=void 0,k!==void 0&&(document.documentElement.style.cursor=k),document.body.classList.remove("non-selectable"),u===!0){const _=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{_(),h()},50):_()}else h!==void 0&&h()}};if(e.event.detected===!0){e.event.isFirst!==!0&&m(r,e.event.mouse);const{payload:k,synthetic:h}=U(r,e,!1);k!==void 0&&(e.handler(k)===!1?e.end(r):(e.styleCleanup===void 0&&e.event.isFirst===!0&&y(),e.event.lastX=k.position.left,e.event.lastY=k.position.top,e.event.lastDir=h===!0?void 0:k.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||u===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){y(),e.event.detected=!0,e.move(r);return}const g=Math.abs(d),b=Math.abs(f);g!==b&&(e.direction.horizontal===!0&&g>b||e.direction.vertical===!0&&g<b||e.direction.up===!0&&g<b&&f<0||e.direction.down===!0&&g<b&&f>0||e.direction.left===!0&&g>b&&d<0||e.direction.right===!0&&g>b&&d>0?(e.event.detected=!0,e.move(r)):e.end(r,!0))},end(r,i){if(e.event!==void 0){if(Y(e,"temp"),M.is.firefox===!0&&j(l,!1),i===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(U(r===void 0?e.lastEvt:r,e).payload);const{payload:d}=U(r===void 0?e.lastEvt:r,e,!0),f=()=>{e.handler(d)};e.styleCleanup!==void 0?e.styleCleanup(f):f()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(l.__qtouchpan=e,o.mouse===!0){const r=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";T(e,"main",[[l,"mousedown","mouseStart",`passive${r}`]])}M.has.touch===!0&&T(e,"main",[[l,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[l,"touchmove","noop","notPassiveCapture"]])},updated(l,s){const o=l.__qtouchpan;o!==void 0&&(s.oldValue!==s.value&&(typeof value!="function"&&o.end(),o.handler=s.value),o.direction=ie(s.modifiers))},beforeUnmount(l){const s=l.__qtouchpan;s!==void 0&&(s.event!==void 0&&s.end(),Y(s,"main"),Y(s,"temp"),M.is.firefox===!0&&j(l,!1),s.styleCleanup?.(),delete l.__qtouchpan)}});function A(l,s,o){return o<=s?s:Math.min(o,Math.max(s,l))}function nt(l,s,o){if(o<=s)return s;const m=o-s+1;let e=s+(l-s)%m;return e<s&&(e=m+e),e===0?0:e}const ce="q-slider__marker-labels",et=l=>({value:l}),tt=({marker:l})=>C("div",{key:l.value,style:l.style,class:l.classes},l.label),rt=[34,37,40,33,39,38],lt={...Ye,...Ge,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ot=["pan","update:modelValue","change"];function it({updateValue:l,updatePosition:s,getDragging:o,formAttrs:m}){const{props:e,emit:r,slots:i,proxy:{$q:d}}=je(),f=Ke(e,d),u=Je(m),y=z(!1),g=z(!1),b=z(!1),k=z(!1),h=a(()=>e.vertical===!0?"--v":"--h"),_=a(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),$=a(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(d.lang.rtl===!0)),S=a(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),q=a(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),L=a(()=>e.disable!==!0&&e.readonly!==!0&&S.value<q.value),W=a(()=>{if(e.step===0)return n=>n;const t=(String(e.step).trim().split(".")[1]||"").length;return n=>parseFloat(n.toFixed(t))}),Z=a(()=>e.step===0?1:e.step),ve=a(()=>L.value===!0?e.tabindex||0:-1),w=a(()=>e.max-e.min),G=a(()=>q.value-S.value),E=a(()=>N(S.value)),I=a(()=>N(q.value)),B=a(()=>e.vertical===!0?$.value===!0?"bottom":"top":$.value===!0?"right":"left"),J=a(()=>e.vertical===!0?"height":"width"),de=a(()=>e.vertical===!0?"width":"height"),Q=a(()=>e.vertical===!0?"vertical":"horizontal"),fe=a(()=>{const t={role:"slider","aria-valuemin":S.value,"aria-valuemax":q.value,"aria-orientation":Q.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),pe=a(()=>`q-slider q-slider${h.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(L.value===!0?" q-slider--editable":""))+(b.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(f.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function F(t){const n="q-slider__"+t;return`${n} ${n}${h.value} ${n}${h.value}${_.value}`}function V(t){const n="q-slider__"+t;return`${n} ${n}${h.value}`}const me=a(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),be=a(()=>V("markers")+" absolute overflow-hidden"),he=a(()=>V("track-container")),ke=a(()=>F("pin")),Ce=a(()=>F("label")),ye=a(()=>F("text-container")),ge=a(()=>F("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),xe=a(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Se=a(()=>{const t={[de.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),$e=a(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ee=a(()=>{const t=I.value-E.value,n={[B.value]:`${100*E.value}%`,[J.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(n.backgroundImage=`url(${e.innerTrackImg}) !important`),n});function qe(t){const{min:n,max:c,step:v}=e;let p=n+t*(c-n);if(v>0){const x=(p-S.value)%v;p+=(Math.abs(x)>=v/2?(x<0?-1:1)*v:0)-x}return p=W.value(p),A(p,S.value,q.value)}function N(t){return w.value===0?0:(t-e.min)/w.value}function Me(t,n){const c=D(t),v=e.vertical===!0?A((c.top-n.top)/n.height,0,1):A((c.left-n.left)/n.width,0,1);return A($.value===!0?1-v:v,E.value,I.value)}const te=a(()=>He(e.markers)===!0?e.markers:Z.value),re=a(()=>{const t=[],n=te.value,c=e.max;let v=e.min;do t.push(v),v+=n;while(v<c);return t.push(c),t}),ae=a(()=>{const t=` ${ce}${h.value}-`;return ce+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${$.value===!0?"rtl":"ltr"}`}),P=a(()=>e.markerLabels===!1?null:Le(e.markerLabels).map((t,n)=>({index:n,value:t.value,label:t.label||t.value,classes:ae.value+(t.classes!==void 0?" "+t.classes:""),style:{...ne(t.value),...t.style||{}}}))),se=a(()=>({markerList:P.value,markerMap:we.value,classes:ae.value,getStyle:ne})),_e=a(()=>{const t=G.value===0?"2px":100*te.value/G.value;return{...ee.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Le(t){if(t===!1)return null;if(t===!0)return re.value.map(et);if(typeof t=="function")return re.value.map(c=>{const v=t(c);return H(v)===!0?{...v,value:c}:{value:c,label:v}});const n=({value:c})=>c>=e.min&&c<=e.max;return Array.isArray(t)===!0?t.map(c=>H(c)===!0?c:{value:c}).filter(n):Object.keys(t).map(c=>{const v=t[c],p=Number(c);return H(v)===!0?{...v,value:p}:{value:p,label:v}}).filter(n)}function ne(t){return{[B.value]:`${100*(t-e.min)/w.value}%`}}const we=a(()=>{if(e.markerLabels===!1)return null;const t={};return P.value.forEach(n=>{t[n.value]=n}),t});function Ee(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](se.value);const t=i["marker-label"]||tt;return P.value.map(n=>t({marker:n,...se.value}))}const Be=a(()=>[[Ve,Fe,void 0,{[Q.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Fe(t){t.isFinal===!0?(k.value!==void 0&&(s(t.evt),t.touch===!0&&l(!0),k.value=void 0,r("pan","end")),y.value=!1,b.value=!1):t.isFirst===!0?(k.value=o(t.evt),s(t.evt),l(),y.value=!0,r("pan","start")):(s(t.evt),l())}function le(){b.value=!1}function Te(t){s(t,o(t)),l(),g.value=!0,y.value=!0,document.addEventListener("mouseup",R,!0)}function R(){g.value=!1,y.value=!1,l(!0),le(),document.removeEventListener("mouseup",R,!0)}function ze(t){s(t,o(t)),l(!0)}function Ae(t){rt.includes(t.keyCode)&&l(!0)}function De(t){if(e.vertical===!0)return null;const n=d.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*n-1} * ${e.thumbSize} / 2 + ${50-100*n}%))`}}function Ie(t){const n=a(()=>g.value===!1&&(b.value===t.focusValue||b.value==="both")?" q-slider--focus":""),c=a(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${$.value===!0?"rtl":"ltr"} absolute non-selectable`+n.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),v=a(()=>({width:e.thumbSize,height:e.thumbSize,[B.value]:`${100*t.ratio.value}%`,zIndex:b.value===t.focusValue?2:void 0})),p=a(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),x=a(()=>De(t.ratio.value)),X=a(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const O=[C("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[C("path",{d:e.thumbPath})]),C("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(O.push(C("div",{class:ke.value+" absolute fit no-pointer-events"+p.value},[C("div",{class:Ce.value,style:{minWidth:e.thumbSize}},[C("div",{class:ye.value,style:x.value},[C("span",{class:X.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&u(O,"push")),C("div",{class:c.value,style:v.value,...t.getNodeData()},O)}}function Ne(t,n,c,v){const p=[];e.innerTrackColor!=="transparent"&&p.push(C("div",{key:"inner",class:$e.value,style:ee.value})),e.selectionColor!=="transparent"&&p.push(C("div",{key:"selection",class:me.value,style:t.value})),e.markers!==!1&&p.push(C("div",{key:"marker",class:be.value,style:_e.value})),v(p);const x=[We("div",{key:"trackC",class:he.value,tabindex:n.value,...c.value},[C("div",{class:xe.value,style:Se.value},p)],"slide",L.value,()=>Be.value)];if(e.markerLabels!==!1){const X=e.switchMarkerLabelsSide===!0?"unshift":"push";x[X](C("div",{key:"markerL",class:ge.value},Ee()))}return x}return Ue(()=>{document.removeEventListener("mouseup",R,!0)}),{state:{active:y,focus:b,preventFocus:g,dragging:k,editable:L,classes:pe,tabindex:ve,attributes:fe,roundValueFn:W,keyStep:Z,trackLen:w,innerMin:S,innerMinRatio:E,innerMax:q,innerMaxRatio:I,positionProp:B,sizeProp:J,isReversed:$},methods:{onActivate:Te,onMobileClick:ze,onBlur:le,onKeyup:Ae,getContent:Ne,getThumbRenderFn:Ie,convertRatioToModel:qe,convertModelToRatio:N,getDraggingRatio:Me}}}export{Ve as T,lt as a,A as b,it as c,rt as k,nt as n,ot as u};
