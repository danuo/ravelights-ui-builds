import{g as oe,s as ue,d as Oe,u as je,a as Xe,e as Ye}from"./selection-8urfZMsW.js";import{av as Ke,aw as Y,ax as T,ay as K,an as He,az as D,aA as I,aO as ie,Y as H,aB as Qe,ad as ve,V as Ue,g as de,W as We,r as _,d as l,b6 as Ge,a7 as Q,o as Je,f as y,_ as Ze,c as et,w as tt}from"./index-C7l3P4d2.js";let at=!1;{const a=document.createElement("div");a.setAttribute("dir","rtl"),Object.assign(a.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(a),a.appendChild(n),a.scrollLeft=-1e3,at=a.scrollLeft>=0,a.remove()}function U(a,n,u){const o=I(a);let e,r=o.left-n.event.x,i=o.top-n.event.y,c=Math.abs(r),m=Math.abs(i);const v=n.direction;v.horizontal===!0&&v.vertical!==!0?e=r<0?"left":"right":v.horizontal!==!0&&v.vertical===!0?e=i<0?"up":"down":v.up===!0&&i<0?(e="up",c>m&&(v.left===!0&&r<0?e="left":v.right===!0&&r>0&&(e="right"))):v.down===!0&&i>0?(e="down",c>m&&(v.left===!0&&r<0?e="left":v.right===!0&&r>0&&(e="right"))):v.left===!0&&r<0?(e="left",c<m&&(v.up===!0&&i<0?e="up":v.down===!0&&i>0&&(e="down"))):v.right===!0&&r>0&&(e="right",c<m&&(v.up===!0&&i<0?e="up":v.down===!0&&i>0&&(e="down")));let k=!1;if(e===void 0&&u===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};e=n.event.lastDir,k=!0,e==="left"||e==="right"?(o.left-=r,c=0,r=0):(o.top-=i,m=0,i=0)}return{synthetic:k,payload:{evt:a,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:o,direction:e,isFirst:n.event.isFirst,isFinal:u===!0,duration:Date.now()-n.event.time,distance:{x:c,y:m},offset:{x:r,y:i},delta:{x:o.left-n.event.lastX,y:o.top-n.event.lastY}}}}let rt=0;const lt=Ke({name:"touch-pan",beforeMount(a,{value:n,modifiers:u}){if(u.mouse!==!0&&T.has.touch!==!0)return;function o(r,i){u.mouse===!0&&i===!0?ve(r):(u.stop===!0&&H(r),u.prevent===!0&&ie(r))}const e={uid:"qvtp_"+rt++,handler:n,modifiers:u,direction:oe(u),noop:He,mouseStart(r){ue(r,e)&&Qe(r)&&(D(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(r,!0))},touchStart(r){if(ue(r,e)){const i=r.target;D(e,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),e.start(r)}},start(r,i){if(T.is.firefox===!0&&K(a,!0),e.lastEvt=r,i===!0||u.stop===!0){if(e.direction.all!==!0&&(i!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const v=r.type.indexOf("mouse")!==-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&ie(v),r.cancelBubble===!0&&H(v),Object.assign(v,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[e.uid]:r.qClonedBy.concat(e.uid)}),e.initialEvent={target:r.target,event:v}}H(r)}const{left:c,top:m}=I(r);e.event={x:c,y:m,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:c,lastY:m}},move(r){if(e.event===void 0)return;const i=I(r),c=i.left-e.event.x,m=i.top-e.event.y;if(c===0&&m===0)return;e.lastEvt=r;const v=e.event.mouse===!0,k=()=>{o(r,v);let C;u.preserveCursor!==!0&&u.preservecursor!==!0&&(C=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),v===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Oe(),e.styleCleanup=p=>{if(e.styleCleanup=void 0,C!==void 0&&(document.documentElement.style.cursor=C),document.body.classList.remove("non-selectable"),v===!0){const B=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{B(),p()},50):B()}else p!==void 0&&p()}};if(e.event.detected===!0){e.event.isFirst!==!0&&o(r,e.event.mouse);const{payload:C,synthetic:p}=U(r,e,!1);C!==void 0&&(e.handler(C)===!1?e.end(r):(e.styleCleanup===void 0&&e.event.isFirst===!0&&k(),e.event.lastX=C.position.left,e.event.lastY=C.position.top,e.event.lastDir=p===!0?void 0:C.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||v===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){k(),e.event.detected=!0,e.move(r);return}const x=Math.abs(c),h=Math.abs(m);x!==h&&(e.direction.horizontal===!0&&x>h||e.direction.vertical===!0&&x<h||e.direction.up===!0&&x<h&&m<0||e.direction.down===!0&&x<h&&m>0||e.direction.left===!0&&x>h&&c<0||e.direction.right===!0&&x>h&&c>0?(e.event.detected=!0,e.move(r)):e.end(r,!0))},end(r,i){if(e.event!==void 0){if(Y(e,"temp"),T.is.firefox===!0&&K(a,!1),i===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(U(r===void 0?e.lastEvt:r,e).payload);const{payload:c}=U(r===void 0?e.lastEvt:r,e,!0),m=()=>{e.handler(c)};e.styleCleanup!==void 0?e.styleCleanup(m):m()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(a.__qtouchpan=e,u.mouse===!0){const r=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";D(e,"main",[[a,"mousedown","mouseStart",`passive${r}`]])}T.has.touch===!0&&D(e,"main",[[a,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[a,"touchmove","noop","notPassiveCapture"]])},updated(a,n){const u=a.__qtouchpan;u!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&u.end(),u.handler=n.value),u.direction=oe(n.modifiers))},beforeUnmount(a){const n=a.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Y(n,"main"),Y(n,"temp"),T.is.firefox===!0&&K(a,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete a.__qtouchpan)}});function E(a,n,u){return u<=n?n:Math.min(u,Math.max(n,a))}function ft(a,n,u){if(u<=n)return n;const o=u-n+1;let e=n+(a-n)%o;return e<n&&(e=o+e),e===0?0:e}const ce="q-slider__marker-labels",nt=a=>({value:a}),st=({marker:a})=>y("div",{key:a.value,style:a.style,class:a.classes},a.label),fe=[34,37,40,33,39,38],ot={...Ue,...je,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ut=["pan","update:modelValue","change"];function it({updateValue:a,updatePosition:n,getDragging:u,formAttrs:o}){const{props:e,emit:r,slots:i,proxy:{$q:c}}=de(),m=We(e,c),v=Xe(o),k=_(!1),x=_(!1),h=_(!1),C=_(!1),p=l(()=>e.vertical===!0?"--v":"--h"),B=l(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),M=l(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(c.lang.rtl===!0)),S=l(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),$=l(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),b=l(()=>e.disable!==!0&&e.readonly!==!0&&S.value<$.value),q=l(()=>{if(e.step===0)return s=>s;const t=(String(e.step).trim().split(".")[1]||"").length;return s=>parseFloat(s.toFixed(t))}),L=l(()=>e.step===0?1:e.step),me=l(()=>b.value===!0?e.tabindex||0:-1),F=l(()=>e.max-e.min),W=l(()=>$.value-S.value),z=l(()=>P(S.value)),N=l(()=>P($.value)),A=l(()=>e.vertical===!0?M.value===!0?"bottom":"top":M.value===!0?"right":"left"),G=l(()=>e.vertical===!0?"height":"width"),pe=l(()=>e.vertical===!0?"width":"height"),J=l(()=>e.vertical===!0?"vertical":"horizontal"),be=l(()=>{const t={role:"slider","aria-valuemin":S.value,"aria-valuemax":$.value,"aria-orientation":J.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),he=l(()=>`q-slider q-slider${p.value} q-slider--${k.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(b.value===!0?" q-slider--editable":""))+(h.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(m.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+p.value:""));function R(t){const s="q-slider__"+t;return`${s} ${s}${p.value} ${s}${p.value}${B.value}`}function Z(t){const s="q-slider__"+t;return`${s} ${s}${p.value}`}const Ce=l(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),ge=l(()=>Z("markers")+" absolute overflow-hidden"),ke=l(()=>Z("track-container")),ye=l(()=>R("pin")),xe=l(()=>R("label")),Se=l(()=>R("text-container")),Me=l(()=>R("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),$e=l(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),qe=l(()=>{const t={[pe.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),we=l(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ee=l(()=>{const t=N.value-z.value,s={[A.value]:`${100*z.value}%`,[G.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(s.backgroundImage=`url(${e.innerTrackImg}) !important`),s});function Le(t){const{min:s,max:d,step:f}=e;let g=s+t*(d-s);if(f>0){const w=(g-S.value)%f;g+=(Math.abs(w)>=f/2?(w<0?-1:1)*f:0)-w}return g=q.value(g),E(g,S.value,$.value)}function P(t){return F.value===0?0:(t-e.min)/F.value}function _e(t,s){const d=I(t),f=e.vertical===!0?E((d.top-s.top)/s.height,0,1):E((d.left-s.left)/s.width,0,1);return E(M.value===!0?1-f:f,z.value,N.value)}const te=l(()=>Ge(e.markers)===!0?e.markers:L.value),ae=l(()=>{const t=[],s=te.value,d=e.max;let f=e.min;do t.push(f),f+=s;while(f<d);return t.push(d),t}),re=l(()=>{const t=` ${ce}${p.value}-`;return ce+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${M.value===!0?"rtl":"ltr"}`}),V=l(()=>e.markerLabels===!1?null:Ee(e.markerLabels).map((t,s)=>({index:s,value:t.value,label:t.label||t.value,classes:re.value+(t.classes!==void 0?" "+t.classes:""),style:{...ne(t.value),...t.style||{}}}))),le=l(()=>({markerList:V.value,markerMap:Te.value,classes:re.value,getStyle:ne})),Be=l(()=>{const t=W.value===0?"2px":100*te.value/W.value;return{...ee.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Ee(t){if(t===!1)return null;if(t===!0)return ae.value.map(nt);if(typeof t=="function")return ae.value.map(d=>{const f=t(d);return Q(f)===!0?{...f,value:d}:{value:d,label:f}});const s=({value:d})=>d>=e.min&&d<=e.max;return Array.isArray(t)===!0?t.map(d=>Q(d)===!0?d:{value:d}).filter(s):Object.keys(t).map(d=>{const f=t[d],g=Number(d);return Q(f)===!0?{...f,value:g}:{value:g,label:f}}).filter(s)}function ne(t){return{[A.value]:`${100*(t-e.min)/F.value}%`}}const Te=l(()=>{if(e.markerLabels===!1)return null;const t={};return V.value.forEach(s=>{t[s.value]=s}),t});function Fe(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](le.value);const t=i["marker-label"]||st;return V.value.map(s=>t({marker:s,...le.value}))}const ze=l(()=>[[lt,Ae,void 0,{[J.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ae(t){t.isFinal===!0?(C.value!==void 0&&(n(t.evt),t.touch===!0&&a(!0),C.value=void 0,r("pan","end")),k.value=!1,h.value=!1):t.isFirst===!0?(C.value=u(t.evt),n(t.evt),a(),k.value=!0,r("pan","start")):(n(t.evt),a())}function se(){h.value=!1}function Re(t){n(t,u(t)),a(),x.value=!0,k.value=!0,document.addEventListener("mouseup",O,!0)}function O(){x.value=!1,k.value=!1,a(!0),se(),document.removeEventListener("mouseup",O,!0)}function De(t){n(t,u(t)),a(!0)}function Ie(t){fe.includes(t.keyCode)&&a(!0)}function Ne(t){if(e.vertical===!0)return null;const s=c.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*s-1} * ${e.thumbSize} / 2 + ${50-100*s}%))`}}function Pe(t){const s=l(()=>x.value===!1&&(h.value===t.focusValue||h.value==="both")?" q-slider--focus":""),d=l(()=>`q-slider__thumb q-slider__thumb${p.value} q-slider__thumb${p.value}-${M.value===!0?"rtl":"ltr"} absolute non-selectable`+s.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),f=l(()=>({width:e.thumbSize,height:e.thumbSize,[A.value]:`${100*t.ratio.value}%`,zIndex:h.value===t.focusValue?2:void 0})),g=l(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),w=l(()=>Ne(t.ratio.value)),j=l(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const X=[y("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[y("path",{d:e.thumbPath})]),y("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(X.push(y("div",{class:ye.value+" absolute fit no-pointer-events"+g.value},[y("div",{class:xe.value,style:{minWidth:e.thumbSize}},[y("div",{class:Se.value,style:w.value},[y("span",{class:j.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&v(X,"push")),y("div",{class:d.value,style:f.value,...t.getNodeData()},X)}}function Ve(t,s,d,f){const g=[];e.innerTrackColor!=="transparent"&&g.push(y("div",{key:"inner",class:we.value,style:ee.value})),e.selectionColor!=="transparent"&&g.push(y("div",{key:"selection",class:Ce.value,style:t.value})),e.markers!==!1&&g.push(y("div",{key:"marker",class:ge.value,style:Be.value})),f(g);const w=[Ze("div",{key:"trackC",class:ke.value,tabindex:s.value,...d.value},[y("div",{class:$e.value,style:qe.value},g)],"slide",b.value,()=>ze.value)];if(e.markerLabels!==!1){const j=e.switchMarkerLabelsSide===!0?"unshift":"push";w[j](y("div",{key:"markerL",class:Me.value},Fe()))}return w}return Je(()=>{document.removeEventListener("mouseup",O,!0)}),{state:{active:k,focus:h,preventFocus:x,dragging:C,editable:b,classes:he,tabindex:me,attributes:be,roundValueFn:q,keyStep:L,trackLen:F,innerMin:S,innerMinRatio:z,innerMax:$,innerMaxRatio:N,positionProp:A,sizeProp:G,isReversed:M},methods:{onActivate:Re,onMobileClick:De,onBlur:se,onKeyup:Ie,getContent:Ve,getThumbRenderFn:Pe,convertRatioToModel:Le,convertModelToRatio:P,getDraggingRatio:_e}}}const ct=()=>({}),mt=et({name:"QSlider",props:{...ot,modelValue:{required:!0,default:null,validator:a=>typeof a=="number"||a===null},labelValue:[String,Number]},emits:ut,setup(a,{emit:n}){const{proxy:{$q:u}}=de(),{state:o,methods:e}=it({updateValue:p,updatePosition:M,getDragging:B,formAttrs:Ye(a)}),r=_(null),i=_(0),c=_(0);function m(){c.value=a.modelValue===null?o.innerMin.value:E(a.modelValue,o.innerMin.value,o.innerMax.value)}tt(()=>`${a.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,m),m();const v=l(()=>e.convertModelToRatio(c.value)),k=l(()=>o.active.value===!0?i.value:v.value),x=l(()=>{const b={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(k.value-o.innerMinRatio.value)}%`};return a.selectionImg!==void 0&&(b.backgroundImage=`url(${a.selectionImg}) !important`),b}),h=e.getThumbRenderFn({focusValue:!0,getNodeData:ct,ratio:k,label:l(()=>a.labelValue!==void 0?a.labelValue:c.value),thumbColor:l(()=>a.thumbColor||a.color),labelColor:l(()=>a.labelColor),labelTextColor:l(()=>a.labelTextColor)}),C=l(()=>o.editable.value!==!0?{}:u.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:S,onBlur:e.onBlur,onKeydown:$,onKeyup:e.onKeyup});function p(b){c.value!==a.modelValue&&n("update:modelValue",c.value),b===!0&&n("change",c.value)}function B(){return r.value.getBoundingClientRect()}function M(b,q=o.dragging.value){const L=e.getDraggingRatio(b,q);c.value=e.convertRatioToModel(L),i.value=a.snap!==!0||a.step===0?L:e.convertModelToRatio(c.value)}function S(){o.focus.value=!0}function $(b){if(fe.includes(b.keyCode)===!1)return;ve(b);const q=([34,33].includes(b.keyCode)?10:1)*o.keyStep.value,L=([34,37,40].includes(b.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*q;c.value=E(o.roundValueFn.value(c.value+L),o.innerMin.value,o.innerMax.value),p()}return()=>{const b=e.getContent(x,o.tabindex,C,q=>{q.push(h())});return y("div",{ref:r,class:o.classes.value+(a.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":a.modelValue},b)}}});export{mt as Q,lt as T,ot as a,E as b,it as c,fe as k,ft as n,at as r,ut as u};
